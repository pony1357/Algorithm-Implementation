#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void counting_sort(int *bef, int *aft, int n, int k);

int main(int argc, char* argv[]){
        int n;
        printf("Input Size: ");
        scanf("%d", &n);

        int k;
        printf("Maximum of Input Data: ");
        scanf("%d", &k);

        srand(time(NULL));
        int *ary = (int*)malloc(sizeof(int)*n);
        int *after = (int*)malloc(sizeof(int)*n);
        for (int i=0; i<n; i++){
                ary[i] = rand() % (k+1);
        }

        printf("Before Sorting..\n");
        for (int i=0; i<n; i++){
                printf("%d ", ary[i]);
        }
        printf("\n\n");

        counting_sort(ary, after, n, k);

        printf("After Sorting..\n");
        for (int i=0; i<n; i++){
                printf("%d ", after[i]);
        }
        printf("\n");

        free(ary);
        free(after);

        return 0;
}

void counting_sort(int *bef, int *aft, int n, int k){
        int C[k+1];
        for (int i=0; i<=k; i++){
                C[i] = 0;
        }

        for (int i=0; i<n; i++){
                C[bef[i]]++;
        }

        for (int i=0; i<k; i++){
               C[i+1] += C[i];
        }

        for (int i=0; i<n; i++){
                aft[C[bef[i]]-1] = bef[i];
                C[bef[i]]--;
        }
}
